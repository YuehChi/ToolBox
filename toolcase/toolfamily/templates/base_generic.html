{% load i18n %}
<!-- base_generic -->
<!DOCTYPE html>
<html lang="en">
<head>

  {% block title %}<title>{% trans "台大工具箱" %}</title>{% endblock %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

  <!-- Add additional CSS in static file -->
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="stylesheet" href="\static\css\user.css">

  <link rel="stylesheet" href="\static\bootstrap\css\bootstrap.min.css" type="text/css" >
  <link rel="stylesheet" href="\static\fonts\material-icons.min.css" type="text/css">
  <link rel="stylesheet" href="\static\css\materialdesignicons.min.css" type="text/css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" language="JavaScript" type="text/javascript"></script>
  <script src="\static\js\base_generic.js" type="text/javascript"></script>
  <script src="\static\js\user.js" type="text/javascript"></script>

</head>

<style>
    .nav-img-circular {
        background-size: cover;
        display: block;
        border-radius: 100px;
        -webkit-border-radius: 100px;
        -moz-border-radius: 100px;
    }

    #language {
        background-color: transparent;
        border-color: transparent;
        outline: none;
        font-size: 14px;
    }

</style>



<body style="background: #f4f4f3;">
  {% block header-navbar %}
      <!----------NavBar FixtedTop---------->
      <nav class="d-none d-lg-block navbar navbar-light navbar-expand-lg fixed-top" style="background: rgb(244,244,243);height: 60px;">
        <div class="container-fluid" style="height: 50px;background: rgb(244,244,243);"><a class="navbar-brand" href="{% url 'index'%}">NTU ToolBox</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse d-lg-flex justify-content-lg-end align-items-lg-center" style="background: rgb(244,244,243);" id="navcol-1"><i class="material-icons" style="font-size: 15px;">language</i>
                <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
                    <input name="next" type="hidden" value="{{ redirect_to }}">
                    <select id="language" name="language" onchange="this.form.submit()">
                        {% get_current_language as LANGUAGE_CODE %}
                        {% get_available_languages as LANGUAGES %}
                        {% get_language_info_list for LANGUAGES as languages %}
                        {% for language in languages %}
                            <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                                {{ language.name_local }}
                            </option>
                        {% endfor %}
                    </select>
                    <!-- <input type="submit" value="Go"> -->
                </form>
                <ul class="navbar-nav align-items-md-center">
                    <li class="nav-item">
                    <button class="btn" type="button" id="button-case-new" style="padding: 2px 12px;color: #ffffff;background: rgb(134,81,64);font-size: 12px;margin-right: 4px;width: 85px;">{% trans "我要發案" %}</button>
                    </li>
                    <li class="nav-item">
                        {% if current_user.icon %}  {# 有圖才顯示 #}
                            <div class="nav-img-circular" id="user-icon"   style="margin:auto;margin-left: 2px;margin-right: 4px;background-image: url({{current_user.icon.url}});width: 40px;height: 40px;border-radius: 100px;"></div>
                        {% else %}
                            <div class="nav-img-circular" id="user-icon"   style="margin:auto;margin-left: 2px;margin-right: 4px;background-image: url('/static/images/default_icon_1.png');width: 40px;height: 40px;border-radius: 100px;"></div>
                        {% endif %}

                        <!-- <div style="margin:auto;position:relative;width:45px;height:45px;overflow:hidden;border-radius:50%;">
                        {% if current_user.icon %}  {# 有圖才顯示 #}
                            <img style="width:100%;height:auto;margin-top: 3px;padding: 2px;" src="{{ current_user.icon.url }}">
                        {% else %}
                            <img style="width:100%;height:auto;margin-top: 3px;padding: 2px;" src="\static\images\default_icon_1.png">
                        {% endif %}
                        </div> -->
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <a class="dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" href="#" style="color: rgb(94,73,73);font-size: 12px;">
                                <div style="float:left;max-width: 46px;overflow:hidden;white-space: nowrap;text-overflow: ellipsis;margin-top: 3px;">
                                    {% if current_user.nickname %}
                                        {{ current_user.nickname}}&nbsp;
                                    {% else %}
                                        {{ current_user.name}}
                                    {% endif %}
                                </div>
                            </a>
                            <div class="dropdown-menu" style="margin: 0;padding: 7px 0px;margin-left:-45px;font-size: 12px;min-width: 100px;margin-top: 11px;border-width: 0px;background: rgb(244,244,243);text-align: center;color: #5e4949;">
                                <a class="dropdown-item member" m="1" href="{% url 'my-user-profile'%}" style="color: #5e4949;">{% trans "會員中心" %}</a>
                                <a class="dropdown-item" href="{%url 'user-publish-record'%}" style="color: #5e4949;">{% trans "我的委託" %}</a>
                                <a class="dropdown-item" href="{%url 'user-take-record'%}" style="color: #5e4949;">{% trans "我的接案" %}</a>
                                <a class="dropdown-item" href="{% url 'user-password-update' %}" style="color: #5e4949;">{% trans "更改密碼" %}</a>
                                <a class="dropdown-item" href="{% url 'logout' %}" style="color: #5e4949;">{% trans "登出" %}</a>
                            </div>
                        </div>
                    </li>
                </ul>

            </div>
        </div>
    </nav>
    <nav id="mobile" class="d-lg-none navbar navbar-light navbar-expand-lg fixed-top" style="background: rgb(244,244,243);height: 50px;border-bottom-width: 0px;">
        <div class="container-fluid"><a class="navbar-brand" href="{% url 'index'%}">NTU ToolBox</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse d-lg-flex justify-content-lg-end align-items-lg-center" style="background: rgb(244,244,243);" id="navcol-1">
                <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
                    <input name="next" type="hidden" value="{{ redirect_to }}">
                    <select name="language" onchange="this.form.submit()">
                        {% get_current_language as LANGUAGE_CODE %}
                        {% get_available_languages as LANGUAGES %}
                        {% get_language_info_list for LANGUAGES as languages %}
                        {% for language in languages %}
                            <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                                {{ language.name_local }}
                            </option>
                        {% endfor %}
                    </select>
                    <!-- <input type="submit" value="Go"> -->
                </form>
                <ul class="navbar-nav">
                    <li class="nav-item "><button class="btn" type="button" id="button-case-new" style="padding: 2px 12px;color: #ffffff;background: rgb(134,81,64);font-size: 12px;margin-right: 4px;width: 85px;">{% trans "我要發案" %}</button></li>
                    <li class="nav-item"><a class="dropdown-item member" m="1" href="{% url 'my-user-profile'%}" style="color: #5e4949;">{% trans "會員中心" %}</a></li>
                    <li class="nav-item"><a class="dropdown-item" href="{%url 'user-publish-record'%}" style="color: #5e4949;">{% trans "我的委託" %}</a></li>
                    <li class="nav-item"><a class="dropdown-item" href="{%url 'user-take-record'%}" style="color: #5e4949;">{% trans "我的接案" %}</a></li>
                    <li class="nav-item"><a class="dropdown-item" href="{% url 'user-password-update' %}" style="color: #5e4949;">{% trans "更改密碼" %}</a></li>
                    <li class="nav-item"><a class="dropdown-item" href="{% url 'logout' %}" style="color: #5e4949;">{% trans "登出" %}</a></li>
                </ul>
            </div>
        </div>
    </nav>
  {% endblock %}

<div class="container-fluid">

<div class="row">
  <div class="col-sm-12 ">
  {% block content %}{% endblock %}

  {% block pagination %}
    {% if is_paginated %}
        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                    <a href="{{ request.path }}?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                    <a href="{{ request.path }}?page={{ page_obj.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
    {% endif %}
  {% endblock %}


  </div>
</div>

</div>
</body>
</html>
